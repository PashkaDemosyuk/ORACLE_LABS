/*1*/
CREATE TABLESPACE TS_DPAA
  DATAFILE 'C:\!Labs\TS_DPAA.dbf'
  SIZE 7M
  AUTOEXTEND ON NEXT 5M
  MAXSIZE 20M
  EXTENT MANAGEMENT LOCAL;

DROP TABLESPACE TS_DPA; 

/*2*/
CREATE TEMPORARY TABLESPACE TS_DPA_TEMP
  TEMPFILE 'C:\!Labs\TS_DPA_TEMP.dbf'
  SIZE 5M
  AUTOEXTEND ON NEXT 3M
  MAXSIZE 30M
  EXTENT MANAGEMENT LOCAL;

DROP TABLESPACE TS_DPA_TEMP; 

/*3*/
SELECT TABLESPACE_NAME, STATUS, CONTENTS LOGGING FROM SYS.DBA_TABLESPACES;

SELECT FILE_NAME, TABLESPACE_NAME,STATUS, MAXBYTES, USER_BYTES FROM DBA_DATA_FILES
UNION
SELECT FILE_NAME, TABLESPACE_NAME,STATUS, MAXBYTES, USER_BYTES FROM DBA_TEMP_FILES;

/*4*/
alter session set "_ORACLE_SCRIPT"=true;
CREATE ROLE RLDPACORE;

GRANT CREATE SESSION,
      CREATE TABLE,
      CREATE VIEW,
      CREATE INSERT,
      CREATE PROCEDURE TO DPA;

/*5*/
SELECT * FROM dba_roles WHERE ROLE LIKE 'RL%';
SELECT * FROM DBA_SYS_PRIVS WHERE GRANTEE = 'RLDPACORE';

/*6*/ 
CREATE PROFILE PF_DPACORE LIMIT
PASSWORD_LIFE_TIME 180 
SESSIONS_PER_USER 3 
FAILED_LOGIN_ATTEMPTS 7
PASSWORD_LOCK_TIME 1
PASSWORD_REUSE_TIME 10
PASSWORD_GRACE_TIME DEFAULT 
CONNECT_TIME 180 
IDLE_TIME 30 

/*7*/
SELECT PROFILE FROM DBA_PROFILES;
SELECT * FROM DBA_PROFILES WHERE PROFILE = 'PF_DPACORE';
SELECT * FROM DBA_PROFILES WHERE PROFILE = 'DEFAULT';

/*8*/
CREATE USER DPACORE IDENTIFIED BY 1111
DEFAULT TABLESPACE TS_DPAA QUOTA UNLIMITED ON TS_DPAA
TEMPORARY TABLESPACE TS_DPA_TEMP
PROFILE PF_DPACORE
ACCOUNT UNLOCK
PASSWORD EXPIRE

/*10*/ 
CREATE TABLE Cities(name varchar2(10), id number(4), people_count number(10));

CREATE VIEW Cities_view AS
SELECT name, people_count FROM Cities;

/*11*/
CREATE TABLESPACE DPA_QDATA
  DATAFILE 'C:\!Labs\DPA_QDATA.dbf'
  SIZE 10 m
  OFFLINE;
  
ALTER TABLESPACE DPA_QDATA ONLINE;

alter session set "_ORACLE_SCRIPT"=true;

CREATE USER DPA IDENTIFIED BY 11111
  DEFAULT TABLESPACE DPA_QDATA QUOTA 2 m ON DPA_QDATA
  PROFILE PF_DPACORE
  ACCOUNT UNLOCK
  
  
CREATE TABLESPACE DPA_T1
  DATAFILE 'C:\!Labs\DPA_T1.dbf'
  SIZE 7 m
  AUTOEXTEND ON NEXT 5 m
  MAXSIZE 20 m
  EXTENT MANAGEMENT LOCAL;
  
CREATE TABLE Pupils(name varchar2(50), surname varchar(50))
TABLESPACE DPA_T1;

INSERT INTO Pupils values('Pavel', 'Demosuk');
INSERT INTO Pupils values('Polina', 'Shenets');
INSERT INTO Pupils values('Hanna', 'Babaka');

DROP TABLE Pupils;
      

 select * from all_objects;     